title: 如果设计前端组件
date: 2020-05-17 17:26:54
---

前端在这几年见的发展，早就进入了组件化的时代了，但是其实有很多人并不太了解前端组件应该如何设计，如何去建立一个好的组件，接下来想给大家介绍一下我的思路。

## 样式摆脱全局样式的影响
首先，现在（2020年），已经过了那个用 sass，less 或者其他样式表工具的年代了，在组件化的浪潮下，我们在构建一个组件的时候，不应该使用全局样式。

例如，以前的一个常用做法是，会在全局样式上做一个 `.panel` 的 class，然后会有诸如 `ItemPanel`, `DialogPanel` 之类的组件或者直接来一个 `div`。这种做法还是刻意分离样式和组件本身。

有人会说这种样式的分离是一种“关注点分离”，事实上，这种说法也正确，但是在我们开发的过程中，我们关注是组件，你可以在组件内分离关注点，但是必须保证组件在开发的生命周期里，组件是一个整体的关注点。试想，假如我们在编写一个 `<Divide />` 的组件，我们还需要在全局样式中添加一个 `.divide` 的 class，或者一个控制高度的 `OnePxMixin` mixin，那么这种做法是荒唐的，直接在组件内把样式控制好是更好的做法，像 `<Divide />` 这样简单的组件，最好不要将样式放到不同的文件或区域，React 的 Css In Js 是最好的做法。

不仅如此，像 sass 中一些全局变量也应该少用，像 `$padding-lg`, `$padding-md` 这样变量矩阵曾经非常流行，现在尽量不用这种变量不是说不好，而是说我们组件尽量要做到正交，如果有 padding 这样需求，我们应该创建一个 `<Padding />` 或者 `<Panel />` 这样的组件，然后把 size 作为一个属性来控制这个 panel 的 padding。

总的来说，好的组件系统，会令页面的开发把关注重新落回 dom 上，我使用 `<List />` 这样的组件，不需要额外编写样式，不需要写额外的 js，系统中统一的 `<List />` 组件已经做好了一切。

## 组件正交

## 智能组件还是哑组件 (超大型哑组件)

## 数据属性
相信很多前端开发者总有尝试在前端项目中写很多对象，用来承载前端数据以及表达业务逻辑。此处所说的对象并不是指 javascript 中的对象，而是例如 es2015+，Typescript 中用 class 关键字声明的对象（包括es5中利用原型链实现对象的做法）。


**事实上，在大多数情况下，在组件中使用这种class对象是一种不好的做法。**

// TODO svg 维护对象
// TODO life circle 对象
// TODO “模型的抽象”
