title: 我为什么不用Jenkins了
date: 2020-11-09 19:57:09
---

Jenkins从诞生以来，一直都是非常受欢迎的持续集成工具。但是渐渐的，Jenkins 的发展速度已经慢慢有点脱节了，很多功能上，已经变得不好用，我也在工作中渐渐放弃了使用 Jenkins，下面来看看 Jenkins 有哪些不好用的地方吧：

## 太慢了
Jenkins实在是反应太缓慢了，不知道是不是因为 Jenkins 是用 Java 编写的缘故，所以对服务器资源的要求比较高，但不管怎样，Jenkins 页面在跳转切换的时候，能明显感觉到延迟和卡顿，十分不流畅。

从数据的方面来看，因为 Jenkins 并没有使用一些额外的数据库，所有的数据都写在了 JENKINS_HOME 目录里，在页面访问的时候，对磁盘 IO 的消耗很大，给性能带来了极大的负担。而且正因为如此，没有使用数据库的 Jenkins 在备份和容灾方面显得十分无力。

## 令人抓狂的插件
Jenkins 最令人抓狂的地方不得不说是插件系统了，Jenkins 的设计大量使用了插件模式，给系统带来了极高的扩展性，但是也因为这些扩展性，导致了 Jenkins 的易用性变得很低。

绝大部分 Jenkins 使用者都是开发团队成员，使用 Jenkins 创建持续集成任务或者其他流水线作业，可是这往往需要安装大量的插件，从 Jenkins 初始化的时候，你就要安装推荐的大量插件，如果因为网络问题没有下载成功，那么糟了，你要再花很多时间去修复遗漏插件的问题，如果你还在中国大陆，大概率你还要换一个插件Source 源来解决拥堵网络问题。你想使用 Pipeline，Git 等功能，那么你还得去下载插件，并重启 Jenkins。这还没完，假如你需要安装一套 Pipeline 插件，大概率你是需要 Google 查一下需要下载哪几个的，因为插件列表实在是太长了，你完全不知道该勾选哪几个来下载，也并不知道哪几个能用。

然后，插件都下载好了，用户还需要是系统设置中去配置各种东西，例如外置的 Docker，你需要在毫无交互可言的页面中寻找 Cloud 设置，填入 Docker socket等信息，来正确启动这项功能。

![crazy_plugin](./why-not-use-jenkins/WX20201109-100742@2x.png)

## Docker集成体验还不够好
从 Docker 诞生以来，这个容器化技术一直都是越来越火的趋势，容器化技术有着几个十分诱人的优点，一致性，隔离，轻量，这些优化放在像 Jenkins 这样的持续工具上，实在是十分合适不过。只可惜 Jenkins 的 Docker 集成一直不够好，Jenkins 是通过插件来集成 Docker 的，但是很不幸的是，Jenkins 的插件仓库有不止一个的 Docker 插件，十分令人迷惑，而且使用起来不方便，需要配置，而且 pipeline 语法不够简介，非 pipeline 项目的配置又太过落后，总而言之，在 Jenkins 上集成 Docker 的体验还不够好，偶尔还会出现一些问题。相比较之下，像 CircleCI，TeamCity，Github CI 甚至 Gitlab CI 的 Docker 集成体验，也要比 Jenkins 要好上不少。

## 调试太麻烦了
Jenkins 的调试实在是太麻烦了，并没有可以在本地或者 Jenkins 服务器上命令行调试的功能，每次修改配置和脚本都需要重新触发构建，如果遇到资源紧张的时候，构建更是缓慢，往往需要等上好久才能验证是否成功，这在紧张的项目交付中十分令人抓狂。

## Jenkins调度太笨了
在 Jenkins 有多个 Slave 的时候，在任务繁忙的时候，你就会发现，有些节点在空转，有些在高负载，一些任务一直会在高负载的节点上等待等，Job 的运行也没有完全发挥出分布式的优势来，导致在任务繁忙的时候，Jenkins 总是表现的非常缓慢，你会难以想象一个中型以上公司统一使用 Jenkins 后，在下午任务繁忙的时候，那简直就是灾难的现场。

## 没有容灾
当 Jenkins Master 挂了的时候，虽然有多个 Slave，但是整个集群还是挂了，这一点上，Jenkins 距离分布式的现代化还有很长的路要走，试想，一个公司的 Jenkins 服务要是挂了，那更是一个更加惨烈的灾难现场。更可怕的时候，Jenkins 的数据并没有一个官方的，方便的备份容灾策略，很多运维人员都是使用原始的 rsync 命令要热备份 JENKINS_HOME 数据，一旦数据丢失，那后果简直不敢想象。

## 版本控制太弱
如果你尝试过 Gitlab CI/CD, 你会法案借助Gitlab CI/CD，您可以完全控制各种分支和Git存储库，进而确保代码免受各种突发的威胁。而在使用Jenkins时，你只能控制存储库，却无法完全控制分支。虽然 Jenkins 还是能通过各种插件配置来完成对分支的支持，但是与其他CI/CD工具相比，体验还是差很多，而且像 Gitlab 还提供有向无环图(directed acyclic graph)管道、通过并发运行程序提供良好的可扩展性、可合并与整合各种请求的、方便添加各种 Job等。

## 写在最后
最后，Jenkins 虽然说仍然是持续集成的佼佼者，而且在企业内部使用非常广，但是事实上近些年来 Jenkins 正在与时代脱轨，无论是功能上，还是界面上，即使是后面推出的“BlueOcean”模式也无补于事，事实上，蓝图模式还是以插件的形式存在，我不敢说这种插件模式的好坏，但是在体验上，Jenkins 与一些强而有力的后起之秀已经形成越来越大的差距，而且国内大厂基本也在搞自己的持续集成系统，可以说，我个人不太看好 Jenkins 之后的发展，但是他仍是开源软件一座不可磨灭的丰碑。